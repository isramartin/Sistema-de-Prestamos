<!-- Barra superior -->
<div class="page-bar">
  <h2>Registrar Prestamo</h2>
</div>

<!-- Card principal -->
<div class="card" [formGroup]="form">
  <!-- Encabezado de la tarjeta -->
  <div class="section-title">INFORMACION DEL CREDITO</div>

  <!-- Información del crédito (2 columnas como en la imagen) -->
  <div class="grid grid-cred">
    <!-- fila 1 -->
    <input class="inp readonly" type="text" value="00000021" readonly />

    <!-- fila 2: DNI + botón buscar (misma línea) -->
    <div class="dni-row">
      <input class="inp" type="text" placeholder="Dni del cliente" formControlName="identificacion" />
      <button class="btn btn-search" type="button" (click)="buscarCliente()">
        <i class="fas fa-search"></i>
      </button>
    </div>

    <!-- fila 3: Nombre cliente (izq) y Documento (der, solo lectura) -->
    <input class="inp readonly" type="text" placeholder="Nombre cliente" formControlName="nombreCliente" />
    <input class="inp readonly" type="text" value="01" readonly />
  </div>

  <hr class="sep" />

  <h3 class="center-title">Informacion del Prestamo</h3>

  <!-- Condiciones del préstamo (3 columnas + botón calcular al lado de fecha) -->
  <div class="grid grid-cond">
    <label>
      <span>Monto Prestamo</span>
      <input class="inp" type="number" placeholder="Monto Prestamo" formControlName="monto" />
    </label>

    <label>
      <span>Interes %</span>
      <input class="inp" type="number" placeholder="Interes" formControlName="tasaAnual" />
    </label>

    <label>
      <span>Nro Cuotas</span>
      <input class="inp" type="number" placeholder="Nro Cuotas" formControlName="plazo" />
    </label>

    <label>
      <span>Forma Pago</span>
      <select class="inp" formControlName="periodicidad">
        <option value="" disabled selected>Seleccione una forma de pago</option>
        <option *ngFor="let p of periodicidades" [ngValue]="p.value">{{ p.label }}</option>
      </select>
    </label>

    <label>
      <span>Moneda</span>
      <!-- solo visual para clonar la distribución de la imagen -->
      <select class="inp">
        <option selected disabled>Seleccione una moneda</option>
        <option>MXN</option>
        <option>USD</option>
      </select>
    </label>

    <!-- Fecha + Calcular, en la misma fila -->
    <div class="fecha-calc">
      <label>
        <span>Fecha</span>
        <input class="inp" type="date" formControlName="fechaDesembolso" />
      </label>
      <button class="btn btn-calc" type="button" (click)="calcular()">Calcular</button>
    </div>
  </div>

  <!-- Resultados (3 columnas) -->
  <div class="grid grid-res">
    <label>
      <span>Monto por Cuota</span>
      <input class="inp readonly" type="text" placeholder="Monto por cuota" [value]="montoPorCuota | number:'1.2-2'" readonly />
    </label>

    <label>
      <span>Total Interes</span>
      <input class="inp readonly" type="text" placeholder="Total interes" [value]="totalInteres | number:'1.2-2'" readonly />
    </label>

    <label>
      <span>Monto total a Pagar</span>
      <input class="inp readonly" type="text" placeholder="Monto total a pagar" [value]="totalPagar | number:'1.2-2'" readonly />
    </label>
  </div>

  <!-- Tabla de cuotas -->
  <div class="table-wrap">
    <table class="tabla">
      <thead>
        <tr>
          <th>Nro. C</th>
          <th>Fecha</th>
          <th class="right">Monto</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let c of cuotas">
          <td>{{ c.numero }}</td>
          <td>{{ c.fecha }}</td>
          <td class="right">{{ c.monto | number:'1.2-2' }}</td>
        </tr>
        <tr *ngIf="cuotas.length === 0">
          <td colspan="3" class="empty"> </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
