<div class="layout" [class.sidebar-collapsed]="!sidebarOpen">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">

  <!-- Sidebar -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="logo">
        <i class="fas fa-dollar-sign"></i>
        <span>SiPrest</span>
      </div>
      <hr class="divider">
      <div class="user-info">
        <img src="assets/profile.jpg" alt="Usuario" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline';">
        <i class="fas fa-user" style="display: none;"></i>
        <span class="username">Gustavo</span>
      </div>
      <hr class="divider">
    </div>
 <div class="menu-scroll-container">
    <nav class="menu">
      <ul>
        <li routerLink="/" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }"
            [class.active]="activeMainItem === 'tablero'"
            (click)="setActiveMain('tablero')">
          <i class="fas fa-home"></i>
          <span>Tablero principal</span>
        </li>

        <!-- Caja con submenú -->
        <li class="submenu-header"
            [class.open]="cajaOpen"
            [class.active]="activeMainItem === 'caja' && !childActive"
            [class.active-parent]="activeMainItem === 'caja' && childActive"
            (click)="toggleCaja()">
          <i class="fas fa-cash-register"></i>
          <span>Caja</span>
          <i class="fas fa-chevron-right arrow"></i>
        </li>

        <ul class="submenu" [class.open]="cajaOpen">
          <li routerLink="/caja/movimientos" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Movimientos</span>
          </li>
          <li routerLink="/caja/cierre" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Cierre Diario</span>
          </li>
          <li routerLink="/caja/historial" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Historial</span>
          </li>
        </ul>

        <li routerLink="/clientes" routerLinkActive="active"
            [class.active]="activeMainItem === 'clientes'"
            (click)="setActiveMain('clientes')">
          <i class="fas fa-users"></i>
          <span>Clientes</span>
        </li>

        <!-- Prestamos con submenú -->
        <li class="submenu-header"
            [class.open]="prestamosOpen"
            [class.active]="activeMainItem === 'prestamos' && !childActive"
            [class.active-parent]="activeMainItem === 'prestamos' && childActive"
            (click)="togglePrestamos()">
          <i class="fas fa-hand-holding-usd"></i>
          <span>Prestamos</span>
          <i class="fas fa-chevron-right arrow"></i>
        </li>

        <ul class="submenu" [class.open]="prestamosOpen">
          <li routerLink="/prestamos/solicitud" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Solicitud/Prestamo</span>
          </li>
          <li routerLink="/prestamos/listado" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Listado Prestamos</span>
          </li>
          <li routerLink="/prestamos/aprobar" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Aprobar S/P</span>
          </li>
        </ul>

        <li routerLink="/empresa" routerLinkActive="active"
            [class.active]="activeMainItem === 'empresa'"
            (click)="setActiveMain('empresa')">
          <i class="fas fa-building"></i>
          <span>Empresa</span>
        </li>

        <li routerLink="/moneda" routerLinkActive="active"
            [class.active]="activeMainItem === 'moneda'"
            (click)="setActiveMain('moneda')">
          <i class="fas fa-coins"></i>
          <span>Moneda</span>
        </li>

        <li routerLink="/backup" routerLinkActive="active"
            [class.active]="activeMainItem === 'backup'"
            (click)="setActiveMain('backup')">
          <i class="fas fa-database"></i>
          <span>Backup</span>
        </li>

        <!-- Mantenimiento con submenú (nuevo) -->
        <li class="submenu-header"
            [class.open]="mantenimientoOpen"
            [class.active]="activeMainItem === 'mantenimiento' && !childActive"
            [class.active-parent]="activeMainItem === 'mantenimiento' && childActive"
            (click)="toggleMantenimiento()">
          <i class="fas fa-cog"></i>
          <span>Mantenimiento</span>
          <i class="fas fa-chevron-right arrow"></i>
        </li>

        <ul class="submenu" [class.open]="mantenimientoOpen">
          <li routerLink="/mantenimiento/usuarios" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Usuarios</span>
          </li>
          <li routerLink="/mantenimiento/roles" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Roles y Permisos</span>
          </li>
          <li routerLink="/mantenimiento/configuracion" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Configuración Sistema</span>
          </li>
        </ul>

        <!-- Reportes con submenú (nuevo) -->
        <li class="submenu-header"
            [class.open]="reportesOpen"
            [class.active]="activeMainItem === 'reportes' && !childActive"
            [class.active-parent]="activeMainItem === 'reportes' && childActive"
            (click)="toggleReportes()">
          <i class="fas fa-file-alt"></i>
          <span>Reportes</span>
          <i class="fas fa-chevron-right arrow"></i>
        </li>

        <ul class="submenu" [class.open]="reportesOpen">
          
          <li routerLink="/reportes/clientes" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Clientes</span>
          </li>
          <li routerLink="/reportes/prestamos" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Préstamos</span>
          </li>
          <li routerLink="/reportes/personalizados" routerLinkActive="active" (click)="selectChild()">
            <i class="far fa-circle"></i>
            <span>Personalizados</span>
          </li>
        </ul>
      </ul>
    </nav>
    </div>
  </aside>

  <!-- Main Content -->
  <div class="main">
    <header class="topbar">
      <button class="hamburger" (click)="toggleSidebar()">
        <i class="fa-solid fa-bars"></i>
      </button>
      <div class="user-menu">
        <span class="notifications"><i class="fas fa-bell"></i> <span class="badge">76</span></span>
        <span class="user-name">gmasias</span>
      </div>
    </header>

    <main class="content">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>